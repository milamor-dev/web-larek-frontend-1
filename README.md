# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание данных

```IProduct``` Интерфейс, описывающий структуру данных продукта. Включает id, описание, изображение, название, категорию и цену продукта.

```IBasketProdact``` Тип, созданный с использованием Pick, который выбирает только определённые свойства из IProduct. В данном случае, для корзины выбраны только id, название и цена продукта.

```IBasket``` Интерфейс, представляющий корзину покупок. Содержит массив элементов IBasketProdact и общую сумму заказа.

```IFullOrder``` Интерфейс, описывающий полный заказ. Включает необязательные поля для типа оплаты, адреса, электронной почты, телефона, а также общую сумму и массив id товаров.

```IPaymentForm``` Тип, созданный с использованием Pick, который выбирает свойства paymentType и address из IFullOrder для описания информации об оплате.

```IContactsForm``` Тип, также созданный с использованием Pick, который выбирает свойства email и phone из IFullOrder для формы контактных данных.

```IOrderResult``` Интерфейс, описывающий результат оформления заказа. Содержит id заказа и общую сумму.

```IAppState``` Интерфейс, описывающий состояние приложения. Включает каталог товаров (catalog), текущий заказ (order) и корзину (basket).

```FormErrors``` Тип, представляет возможные ошибки формы.



## 1 Класс Component
базовый класс, который может быть использован для создания компонентов веб-приложения.
Конструктор: Принимает container, который является корневым элементом DOM для компонента. Важно отметить, что код в конструкторе выполняется до инициализации любых свойств, объявленных в дочернем классе.

```toggleClass``` Метод для переключения класса у элемента. 

```Сеттеры:```

- setText: Устанавливает текстовое содержимое элемента. 
- setDisabled: Изменяет атрибут disabled элемента.
- setHidden: Скрывает элемент.
- setVisible: Показывает элемент.
- setImage: Устанавливает атрибуты src и alt для элемента HTMLImageElement.

```render``` Метод для рендеринга компонента. Принимает необязательный параметр data, который является частичным объектом типа T. Этот объект используется для обновления состояния компонента перед его отображением. Возвращает container, который является корневым элементом DOM компонента.

## 2 Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Класс имеет методы ```on``` ,  ```off``` ,  ```emit```  — для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
Дополнительно реализованы методы  ```onAll``` и  ```offAll```  — для подписки на все события и сброса всех подписчиков.
Метод  ```trigger``` , генерирующий заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти
классы будут генерировать события, не будучи при этом напрямую зависимыми от класса  EventEmitter .

## 1 Класс Page 
Класс для управления веб-страницей. 

```IPage``` Интерфейс, который определяет структуру состояния страницы. Содержит счётчик (counter), каталог элементов (catalog) и флаг блокировки (locked).

```Page``` Класс, расширяющий Component и реализующий интерфейс IPage. Он управляет элементами страницы и взаимодействием с пользователем.

```Конструктор``` Принимает контейнер страницы и объект событий (events). Инициализирует элементы страницы и устанавливает обработчики событий.
- _counter: Элемент, отображающий количество товаров в корзине.
- _catalog: Контейнер для элементов каталога.
- _wrapper: Обёртка страницы, которая может быть заблокирована.
- _basket: Элемент корзины, при клике на который модальное окно корзины.

```Сеттеры:```
- set counter: Устанавливает текст счётчика корзины.
- set catalog: Заменяет дочерние элементы каталога новыми элементами.
- set locked: Добавляет или удаляет класс блокировки с обёртки страницы в зависимости от значения флага.

## 2 Класс AppState 
Является ключевым компонентом для управления состоянием приложения. Он использует интерфейс ```IAppState``` для определения структуры состояния.

Этот класс обеспечивает централизованное управление состоянием приложения, что позволяет легко отслеживать и управлять данными пользователя и взаимодействиями в приложении.

- basket: Массив строк, представляющий корзину покупок пользователя.
- catalog: Массив объектов IProduct, представляющий каталог товаров.
- order: Объект IFullOrder, представляющий текущий заказ пользователя.
- formErrors: Объект FormErrors, содержащий ошибки формы.

```Методы:```
- toggleOrderedProduct(): Метод для добавления или удаления товара из заказа. 
- clearBasket(): Метод для очистки корзины. 
- getTotal(): Метод для расчета общей стоимости заказа.
- setCatalog(): Метод для установки каталога товаров. 
- setOrderField(): Метод для установки значения полей форм заказа.
- validateOrder(): Метод для валидации заказа. 

## 3 Класс Card

Позволяет создавать динамические карточки товаров с различным содержимым, которые могут быть добавлены на веб-страницу.

```ICardActions``` интерфейс, который определяет действия для карточки. Он содержит один метод ```onClick```, который вызывается при клике на карточку.

```ICard``` интерфейс, который описывает структуру данных для карточки. Он содержит поля для категории, заголовка, описания, изображения и цены. Поле description является.

```Card``` класс, который представляет карточку товара. Он наследует от Component и использует тип ICard для определения данных, которые он будет отображать.

```Конструктор``` Принимает имя блока, контейнер DOM и действия. 

```Сеттеры и геттеры:``` Класс определяет сеттеры и геттеры для управления свойствами карточки, такими как id, title, category, image, description и price. 

- set id и get id: Эти методы управляют пользовательским атрибутом data-id контейнера, который может использоваться для идентификации карточки.
- set title и get title: Устанавливают и получают текстовое содержимое элемента заголовка.
- set category: Устанавливает текстовое содержимое элемента категории.
- set image: Устанавливает изображение и альтернативный текст для элемента изображения.
- set description: Устанавливает описание. 
- set price: Устанавливает текстовое содержимое элемента цены.


## 4 Класс Form

Предназначен для управления состоянием и поведением HTML-формы. 
 ```IFormState``` Интерфейс, определяет структуру состояния формы, включая валидность (valid) и массив ошибок (errors).

 ```Form<T>```Обобщенный класс, который управляет формой. T представляет тип данных, который будет связан с формой.

```Конструктор``` Инициализирует элементы формы и устанавливает обработчики событий.
- _submit: Кнопка отправки формы.
- _errors: Элемент для отображения ошибок формы.
Добавляет обработчики событий для input и submit.

 ```onInputChange``` Метод, вызывается при изменении любого поля ввода. Он генерирует событие, которое сообщает о изменении значения поля.

```Сеттеры:```
- set valid Устанавливает доступность кнопки отправки в зависимости от валидности формы.
- set errors Устанавливает текст ошибок в элемент _errors.
Render: Метод, обновляет состояние формы и возвращает контейнер формы. 

## 5 Класс Bascet

Используется для управления представлением корзины.

```IBasketView``` Интерфейс, определяющий структуру данных для представления корзины. Содержит массив элементов items, общую сумму total и массив выбранных элементов selected.

```Basket``` Класс, представляющий корзину покупок. Он содержит защищенные свойства ```_list```, ```_total``` и ````_button````, которые соответствуют элементам пользовательского интерфейса.

```Конструктор``` Конструктор класса принимает два аргумента: container (HTML-элемент формы) и events (объект событий). 

```Сеттеры:```
- set items: Сеттер для установки элементов в корзине. 
- set selected: Сеттер для управления состоянием кнопки на основе выбранных элементов.
- set total: Сеттер для установки общей суммы в корзине. 


## 6 Класс Order

Этот класс позволяет управлять данными формы заказа 

```Конструктор```  принимает два аргумента: container (HTML-элемент формы) и events (объект событий). 

```set paymentType, set address, set phone, set email:``` сеттеры для установки значений свойств заказа. 

## 7 Класс Success 

Представляет собой компонент пользовательского интерфейса, который отображает состояние успешного оформления заказа.

```ISuccess``` Интерфейс, определяющий структуру данных для компонента Success. Содержит свойство total (общую сумму оформленного заказа).

```ISuccessActions``` Интерфейс, определяющий действия, связанные с компонентом Success. Содержит метод onClick, который будет вызываться при нажатии на элемент управления.

```Success``` Класс, расширяющий абстрактный класс Component. Он использует интерфейсы ISuccess и ISuccessActions для определения своих свойств и действий.

```Конструктор:``` Принимает два параметра: container - элемент DOM, который будет содержать компонент, и actions - объект с действиями. 

```_close``` Защищенное свойство, которое хранит ссылку на элемент DOM, представляющий кнопку закрытия или действие выхода из состояния успеха.

## 8 Класс Modal 

Предназначен для управления модальным .

```IModalData``` Интерфейс, который определяет структуру данных для модального окна. Содержит свойство content, которое является элементом HTMLElement и представляет содержимое модального окна.

```Modal``` Класс, который расширяет абстрактный класс Component. Он используется для создания и управления модальным окном.

```Конструктор``` Принимает container — элемент DOM, который будет использоваться как контейнер для модального окна, и events — объект событий. В конструкторе инициализируются кнопка закрытия _closeButton и контент _content, а также устанавливаются обработчики событий.

```_closeButton и _content:``` Защищенные свойства, которые хранят ссылки на элементы DOM для кнопки закрытия и содержимого модального окна соответственно.

```Обработчики событий``` Для _closeButton и container устанавливаются обработчики событий клика, которые вызывают метод close. Для _content устанавливается обработчик события клика, который предотвращает всплытие события (чтобы клик внутри модального окна не приводил к его закрытию).

```open и close``` Методы для открытия и закрытия модального окна. 
render: Метод для рендеринга модального окна. 

